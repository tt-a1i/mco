# v0.1.1 - 通用 Agent 执行基线

日期：2026-02-26

## 版本亮点

`v0.1.1` 将项目从“仅 review 编排”扩展为“可被 agent 调用的通用执行层”：

- 新增 `mco run`：面向通用多 Provider 执行聚合。
- 保留 `mco review`：继续走严格 findings 合同与决策流程。
- 新增策略级路径与权限控制：
  - `allow_paths`
  - `provider_permissions`
  - `enforcement_mode`（`strict` / `best_effort`）
- 接入 provider 权限能力判定（已覆盖 `claude`、`codex`）。
- 增补 run 模式相关测试：路径越界拒绝、严格权限 fail-closed、CLI/配置合并行为。

## 使用示例

Review 模式：

```bash
./mco review \
  --repo . \
  --prompt "Review for high-risk bugs and security issues." \
  --providers claude,codex \
  --json
```

通用执行模式：

```bash
./mco run \
  --repo . \
  --prompt "总结当前仓库的架构权衡。" \
  --providers claude,codex,gemini \
  --allow-paths runtime,scripts \
  --target-paths runtime \
  --enforcement-mode strict \
  --json
```

## 安全与权限边界

- `allow_paths` / `target_paths` 会基于 `repo_root` 做规范化校验，越界直接拒绝。
- `strict` 模式下，provider 不支持的权限键会直接失败（fail-closed）。
- `best_effort` 模式下，不支持的权限键会被丢弃并在结果中保留说明。
- 操作系统级沙箱能力仍取决于 provider 实际支持；策略校验本身不等同于内核级隔离。

## 验证结果

- 单元测试：`62` 项通过。
- Runtime gate：`PASS`（`Runtime G/H status: PASS`）。
- Step5 基准报告仍可在 `reports/adapter-contract/2026-02-26/` 查看。

